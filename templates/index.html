{% extends "base.html" %}
{% block content %}

<h2>ğŸ“‹ Bestillinger</h2>

{% if sessions %}
<div class="grid">
{% for name, session in sessions.items() %}
    <div class="card">

        <h3>
            {{ name }}
            {% if not session.open %}
                <span title="Bestilling lukket">ğŸ”’</span>
            {% endif %}
        </h3>

        <p>
            ğŸ’° <strong>Total:</strong>
            {{ totals.get(name, 0) }} kr
        </p>

        <div class="actions">
            <a class="btn" href="/session/{{ name }}">Ã…bn</a>

            {% if admin %}
                <a class="btn danger"
                   href="/delete_session/{{ name }}"
                   onclick="return confirm('Vil du slette hele bestillingen?')">
                   âŒ
                </a>
            {% endif %}
        </div>

    </div>
{% endfor %}
</div>
{% else %}
<p>Der er ingen bestillinger endnu.</p>
{% endif %}

<hr>

{% if admin %}
<section class="card admin-panel">
    <h2>ğŸ›  Admin</h2>
    <div class="admin-grid">
        <a href="/open_session" class="btn green">â• Ny bestilling</a>
        <a href="/close_session" class="btn orange">ğŸ”’ Luk aktiv bestilling</a>
        <a href="/admin/users" class="btn blue">ğŸ‘¥ Brugere</a>
        <a href="/admin/audit" class="btn purple">ğŸ“œ Audit</a>
    </div>
</section>
{% endif %}


<script>
/* Simpel real-time refresh (bevarer nuvÃ¦rende lÃ¸sning) */
setInterval(() => {
    location.reload();
}, 4000);
</script>

{% endblock %}
