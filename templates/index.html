{% extends "base.html" %}
{% block content %}

<h2>ğŸ“‹ Bestillinger</h2>

<div class="grid">
{% for name, session in sessions.items() %}
    <div class="card">

        <h3>
            {{ name }}
            {% if not session.open %}
                <span title="Bestilling lukket">ğŸ”’</span>
            {% endif %}
        </h3>

        <p>
            ğŸ’° <strong>Total:</strong>
            {{ totals.get(name, 0) }} kr
        </p>

        <div class="actions">
            <a class="btn" href="/session/{{ name }}">Ã…bn</a>

            {% if admin %}
                <a class="btn danger"
                   href="/delete_session/{{ name }}"
                   onclick="return confirm('Vil du slette hele bestillingen?')">
                   âŒ
                </a>
            {% endif %}
        </div>

    </div>
{% endfor %}
</div>

<hr>

{% if admin %}
<div class="actions">
    <a class="btn success" href="/open_session">â• Ny bestilling</a>
    <a class="btn warning" href="/close_session">ğŸ”’ Luk aktiv bestilling</a>
    <a class="btn blue" href="/admin/users">ğŸ‘¥ Brugere</a>
</div>
{% endif %}

<script>
/* Simpel real-time refresh (bevarer nuvÃ¦rende lÃ¸sning) */
setInterval(() => {
    location.reload();
}, 4000);
</script>

{% endblock %}
