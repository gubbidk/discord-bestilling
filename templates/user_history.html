{% extends "base.html" %}
{% block content %}

<h2>ğŸ“œ Brugerhistorik</h2>
{% if uid %}
<p class="muted">
    Discord ID: <strong>{{ uid }}</strong>
</p>
{% endif %}
<form method="get" class="actions">
    <input type="text"
           name="uid"
           placeholder="Discord ID"
           value="{{ uid or '' }}"
           style="min-width:300px;">
    <button class="btn blue">ğŸ” SÃ¸g</button>
</form>

<hr>

{% if uid %}
    {% if orders %}
        <div class="grid">
        {% for o in orders %}
            <div class="card">
                <h3>ğŸ“¦ {{ o.session }}</h3>

                <p class="muted">{{ o.time }}</p>

                <ul>
                    {% for item, amount in o["items"].items() %}
                        {% if amount > 0 %}
                            <li>{{ item }} Ã— {{ amount }}</li>
                        {% endif %}
                    {% endfor %}
                </ul>

                <p>
                    <strong>Total:</strong>
                    {{ "{:,}".format(o.total) }} kr
                </p>
            </div>
        {% endfor %}
        </div>
    {% else %}
        <p>Ingen ordrer fundet for denne bruger.</p>
    {% endif %}
{% else %}
    <p>Indtast et Discord-ID for at se historik.</p>
{% endif %}

<div class="actions">
    <a class="btn" href="/admin/users">â¬…ï¸ Tilbage til brugere</a>
</div>
{% if orders %}
<div class="card">
    <h3>ğŸ’° Samlet total</h3>
    <p style="font-size:1.3em;">
        {{ "{:,}".format(grand_total) }} kr
    </p>
</div>
{% endif %}

{% endblock %}
