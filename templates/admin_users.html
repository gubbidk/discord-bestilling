{% extends "base.html" %}
{% block content %}

<h2>ğŸ‘¥ Brugere</h2>

{% if users %}
<div class="grid">
{% for uid, info in users|dictsort(attribute='1.role', reverse=True) %}
    <div class="card">

        <h3>
            {{ info.name }}

            {% if info.role == "admin" %}
                <span title="Admin">ğŸ›¡ï¸</span>
            {% else %}
                <span title="Bruger">ğŸ‘¤</span>
            {% endif %}

            {% if uid in blocked %}
                <span title="Blokeret">â›” Blokeret</span>
            {% endif %}
        </h3>

        <p>
            <strong>ID:</strong> {{ uid }}<br>
            <strong>Rolle:</strong>
            {% if info.role == "admin" %}
                ğŸ›¡ï¸ Admin
            {% else %}
                ğŸ‘¤ Bruger
            {% endif %}
        </p>

        <p>
            <strong>FÃ¸rste login:</strong><br>
            {{ info.first_seen }}<br>
            <strong>Sidst set:</strong><br>
            {{ info.last_seen }}
        </p>

        <div class="actions">
            {% if uid in blocked %}
                <a class="btn success"
                   href="/admin/unblock/{{ uid }}"
                   onclick="return confirm('Vil du fjerne blokeringen?')">
                   ğŸ”“ Unblock
                </a>
            {% else %}
                <a class="btn danger"
                   href="/admin/block/{{ uid }}"
                   onclick="return confirm('Vil du blokere denne bruger?')">
                   â›” Block
                </a>
            {% endif %}
        </div>

    </div>
{% endfor %}
</div>
{% else %}
<p>Ingen brugere har logget ind endnu.</p>
{% endif %}

<hr>

<div class="actions">
    <a class="btn" href="/">â¬…ï¸ Tilbage</a>
</div>

{% endblock %}
